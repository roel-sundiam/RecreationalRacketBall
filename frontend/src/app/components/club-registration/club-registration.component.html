<div class="registration-page">
  <div class="page-container">
    <!-- Header -->
    <div class="page-header">
      <button class="back-btn" (click)="cancel()">
        <span class="back-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <line x1="19" y1="12" x2="5" y2="12"/>
            <polyline points="12 19 5 12 12 5"/>
          </svg>
        </span>
        Back
      </button>
      <div class="header-content">
        <div class="icon-wrapper">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"/>
            <rect x="14" y="3" width="7" height="7"/>
            <rect x="14" y="14" width="7" height="7"/>
            <rect x="3" y="14" width="7" height="7"/>
          </svg>
        </div>
        <h1>Create New Club</h1>
        <p class="subtitle">Set up your tennis club in just a few steps</p>
      </div>
    </div>

    <!-- Progress Steps -->
    <div class="progress-steps">
      <div class="step" [class.active]="currentStep === 1" [class.completed]="currentStep > 1">
        <div class="step-number">
          <svg *ngIf="currentStep > 1" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
            <polyline points="20 6 9 17 4 12"/>
          </svg>
          <span *ngIf="currentStep <= 1">1</span>
        </div>
        <div class="step-info">
          <span class="step-label">Club Information</span>
          <span class="step-desc">Basic details</span>
        </div>
      </div>
      <div class="step-line" [class.completed]="currentStep > 1"></div>
      <div class="step" [class.active]="currentStep === 2" [class.completed]="currentStep > 2">
        <div class="step-number">
          <svg *ngIf="currentStep > 2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
            <polyline points="20 6 9 17 4 12"/>
          </svg>
          <span *ngIf="currentStep <= 2">2</span>
        </div>
        <div class="step-info">
          <span class="step-label">Address & Location</span>
          <span class="step-desc">Physical location</span>
        </div>
      </div>
    </div>

    <!-- Form Content -->
    <div class="form-card" *ngIf="currentStep === 1">
      <form [formGroup]="clubInfoForm">
        <!-- Basic Information Section -->
        <div class="form-section">
          <div class="section-header">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="16" x2="12" y2="12"/>
              <line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
            <h2>Basic Information</h2>
          </div>

          <div class="form-group">
            <label for="name">
              Club Name <span class="required">*</span>
            </label>
            <div class="input-wrapper">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7"/>
                <rect x="14" y="3" width="7" height="7"/>
                <rect x="14" y="14" width="7" height="7"/>
                <rect x="3" y="14" width="7" height="7"/>
              </svg>
              <input
                type="text"
                id="name"
                formControlName="name"
                placeholder="e.g., Rich Town Tennis Club"
                [class.error]="clubInfoForm.get('name')?.invalid && clubInfoForm.get('name')?.touched"
              >
            </div>
            <span class="error-text" *ngIf="clubInfoForm.get('name')?.hasError('required') && clubInfoForm.get('name')?.touched">
              Club name is required
            </span>
            <span class="error-text" *ngIf="clubInfoForm.get('name')?.hasError('minlength') && clubInfoForm.get('name')?.touched">
              Club name must be at least 3 characters
            </span>
          </div>

          <div class="form-group">
            <label for="slug">
              Club Slug (URL-friendly name)
            </label>
            <div class="input-wrapper">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
              </svg>
              <input
                type="text"
                id="slug"
                formControlName="slug"
                placeholder="rich-town-tennis-club"
                [class.error]="clubInfoForm.get('slug')?.invalid && clubInfoForm.get('slug')?.touched"
              >
            </div>
            <span class="hint-text">Used in URLs. Auto-generated from club name.</span>
            <span class="error-text" *ngIf="clubInfoForm.get('slug')?.hasError('pattern') && clubInfoForm.get('slug')?.touched">
              Only lowercase letters, numbers, and hyphens allowed
            </span>
          </div>
        </div>

        <!-- Contact Information Section -->
        <div class="form-section">
          <div class="section-header">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
            </svg>
            <h2>Contact Information</h2>
          </div>

          <div class="form-group">
            <label for="contactEmail">
              Contact Email <span class="required">*</span>
            </label>
            <div class="input-wrapper">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                <polyline points="22,6 12,13 2,6"/>
              </svg>
              <input
                type="email"
                id="contactEmail"
                formControlName="contactEmail"
                placeholder="contact@yourclub.com"
                [class.error]="clubInfoForm.get('contactEmail')?.invalid && clubInfoForm.get('contactEmail')?.touched"
              >
            </div>
            <span class="error-text" *ngIf="clubInfoForm.get('contactEmail')?.hasError('required') && clubInfoForm.get('contactEmail')?.touched">
              Email is required
            </span>
            <span class="error-text" *ngIf="clubInfoForm.get('contactEmail')?.hasError('email') && clubInfoForm.get('contactEmail')?.touched">
              Please enter a valid email
            </span>
          </div>

          <div class="form-group">
            <label for="contactPhone">
              Contact Phone <span class="required">*</span>
            </label>
            <div class="input-wrapper">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
              </svg>
              <input
                type="tel"
                id="contactPhone"
                formControlName="contactPhone"
                placeholder="+63 917 123 4567"
                [class.error]="clubInfoForm.get('contactPhone')?.invalid && clubInfoForm.get('contactPhone')?.touched"
              >
            </div>
            <span class="error-text" *ngIf="clubInfoForm.get('contactPhone')?.hasError('required') && clubInfoForm.get('contactPhone')?.touched">
              Phone number is required
            </span>
            <span class="error-text" *ngIf="clubInfoForm.get('contactPhone')?.hasError('pattern') && clubInfoForm.get('contactPhone')?.touched">
              Please enter a valid phone number
            </span>
          </div>
        </div>

        <!-- Branding Section -->
        <div class="form-section">
          <div class="section-header">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="13.5" cy="6.5" r=".5"/>
              <circle cx="17.5" cy="10.5" r=".5"/>
              <circle cx="8.5" cy="7.5" r=".5"/>
              <circle cx="6.5" cy="12.5" r=".5"/>
              <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"/>
            </svg>
            <h2>Branding (Optional)</h2>
          </div>

          <div class="color-group">
            <div class="form-group">
              <label for="primaryColor">Primary Color</label>
              <div class="color-input-wrapper">
                <input
                  type="color"
                  id="primaryColor"
                  formControlName="primaryColor"
                  class="color-input"
                >
                <span class="color-value">{{ clubInfoForm.get('primaryColor')?.value || '#667eea' }}</span>
              </div>
            </div>

            <div class="form-group">
              <label for="accentColor">Accent Color</label>
              <div class="color-input-wrapper">
                <input
                  type="color"
                  id="accentColor"
                  formControlName="accentColor"
                  class="color-input"
                >
                <span class="color-value">{{ clubInfoForm.get('accentColor')?.value || '#764ba2' }}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div class="form-actions">
          <button type="button" class="secondary-btn" (click)="cancel()">Cancel</button>
          <button type="button" class="primary-btn" (click)="nextStep()" [disabled]="clubInfoForm.invalid">
            Next Step
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="5" y1="12" x2="19" y2="12"/>
              <polyline points="12 5 19 12 12 19"/>
            </svg>
          </button>
        </div>
      </form>
    </div>

    <!-- Step 2: Address Form -->
    <div class="form-card" *ngIf="currentStep === 2">
      <form [formGroup]="addressForm">
        <!-- Address Section -->
        <div class="form-section">
          <div class="section-header">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
              <polyline points="9 22 9 12 15 12 15 22"/>
            </svg>
            <h2>Club Address</h2>
          </div>

          <div class="form-group">
            <label for="street">
              Street Address <span class="required">*</span>
            </label>
            <div class="input-wrapper">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
              </svg>
              <input
                type="text"
                id="street"
                formControlName="street"
                placeholder="123 Main Street"
                [class.error]="addressForm.get('street')?.invalid && addressForm.get('street')?.touched"
              >
            </div>
            <span class="error-text" *ngIf="addressForm.get('street')?.hasError('required') && addressForm.get('street')?.touched">
              Street address is required
            </span>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="city">
                City <span class="required">*</span>
              </label>
              <input
                type="text"
                id="city"
                formControlName="city"
                placeholder="San Fernando"
                [class.error]="addressForm.get('city')?.invalid && addressForm.get('city')?.touched"
              >
              <span class="error-text" *ngIf="addressForm.get('city')?.hasError('required') && addressForm.get('city')?.touched">
                City is required
              </span>
            </div>

            <div class="form-group">
              <label for="province">
                Province/State <span class="required">*</span>
              </label>
              <input
                type="text"
                id="province"
                formControlName="province"
                placeholder="Pampanga"
                [class.error]="addressForm.get('province')?.invalid && addressForm.get('province')?.touched"
              >
              <span class="error-text" *ngIf="addressForm.get('province')?.hasError('required') && addressForm.get('province')?.touched">
                Province is required
              </span>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="postalCode">
                Postal Code <span class="required">*</span>
              </label>
              <input
                type="text"
                id="postalCode"
                formControlName="postalCode"
                placeholder="2000"
                [class.error]="addressForm.get('postalCode')?.invalid && addressForm.get('postalCode')?.touched"
              >
              <span class="error-text" *ngIf="addressForm.get('postalCode')?.hasError('required') && addressForm.get('postalCode')?.touched">
                Postal code is required
              </span>
            </div>

            <div class="form-group">
              <label for="country">
                Country <span class="required">*</span>
              </label>
              <select
                id="country"
                formControlName="country"
                [class.error]="addressForm.get('country')?.invalid && addressForm.get('country')?.touched"
              >
                <option value="">Select country</option>
                <option *ngFor="let country of countries" [value]="country">{{ country }}</option>
              </select>
              <span class="error-text" *ngIf="addressForm.get('country')?.hasError('required') && addressForm.get('country')?.touched">
                Country is required
              </span>
            </div>
          </div>
        </div>

        <!-- Geographic Coordinates Section -->
        <div class="form-section">
          <div class="section-header">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="10" r="3"/>
              <path d="M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z"/>
            </svg>
            <h2>Geographic Coordinates</h2>
          </div>
          <p class="section-description">
            Used for weather data and location services
          </p>

          <button
            type="button"
            class="location-btn"
            (click)="getCurrentLocation()"
            [disabled]="loading"
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
            Detect Current Location
          </button>

          <div class="form-row">
            <div class="form-group">
              <label for="latitude">
                Latitude <span class="required">*</span>
              </label>
              <input
                type="number"
                id="latitude"
                formControlName="latitude"
                placeholder="15.087"
                step="0.000001"
                [class.error]="addressForm.get('latitude')?.invalid && addressForm.get('latitude')?.touched"
              >
              <span class="error-text" *ngIf="addressForm.get('latitude')?.hasError('required') && addressForm.get('latitude')?.touched">
                Latitude is required
              </span>
              <span class="error-text" *ngIf="(addressForm.get('latitude')?.hasError('min') || addressForm.get('latitude')?.hasError('max')) && addressForm.get('latitude')?.touched">
                Latitude must be between -90 and 90
              </span>
            </div>

            <div class="form-group">
              <label for="longitude">
                Longitude <span class="required">*</span>
              </label>
              <input
                type="number"
                id="longitude"
                formControlName="longitude"
                placeholder="120.6285"
                step="0.000001"
                [class.error]="addressForm.get('longitude')?.invalid && addressForm.get('longitude')?.touched"
              >
              <span class="error-text" *ngIf="addressForm.get('longitude')?.hasError('required') && addressForm.get('longitude')?.touched">
                Longitude is required
              </span>
              <span class="error-text" *ngIf="(addressForm.get('longitude')?.hasError('min') || addressForm.get('longitude')?.hasError('max')) && addressForm.get('longitude')?.touched">
                Longitude must be between -180 and 180
              </span>
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div class="form-actions">
          <button type="button" class="secondary-btn" (click)="prevStep()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="19" y1="12" x2="5" y2="12"/>
              <polyline points="12 19 5 12 12 5"/>
            </svg>
            Back
          </button>
          <button
            type="button"
            class="primary-btn create-btn"
            (click)="registerClub()"
            [disabled]="loading || clubInfoForm.invalid || addressForm.invalid"
          >
            <div class="spinner" *ngIf="loading"></div>
            <svg *ngIf="!loading" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <polyline points="20 6 9 17 4 12"/>
            </svg>
            <span *ngIf="!loading">Create Club</span>
            <span *ngIf="loading">Creating...</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
