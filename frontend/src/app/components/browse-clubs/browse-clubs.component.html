<div class="browse-clubs-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <div class="header-text">
        <h1>Discover Clubs</h1>
        <p>Explore available clubs and join to start booking courts</p>
      </div>
      <button mat-raised-button class="requests-btn" (click)="viewMyRequests()">
        <mat-icon>history</mat-icon>
        <span>My Requests</span>
      </button>
    </div>
  </div>

  <!-- Search Section -->
  <div class="search-section" *ngIf="!loading && clubs.length > 0">
    <div class="search-wrapper">
      <div class="search-input-wrapper">
        <input
          type="text"
          class="search-input"
          [(ngModel)]="searchQuery"
          (input)="searchClubs(searchQuery)"
          placeholder="Search clubs by name, city, or address...">
        <mat-icon class="search-icon">search</mat-icon>
      </div>
      <p class="search-results" *ngIf="searchQuery">
        Found {{ filteredClubs.length }} club<span *ngIf="filteredClubs.length !== 1">s</span>
      </p>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <mat-spinner diameter="48"></mat-spinner>
    <p>Loading available clubs...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && clubs.length === 0" class="empty-state">
    <div class="empty-icon">
      <mat-icon>domain_disabled</mat-icon>
    </div>
    <h2>All Set!</h2>
    <p>You are already a member of all available clubs</p>
    <button mat-raised-button color="primary" routerLink="/club-selector" class="empty-btn">
      <mat-icon>dashboard</mat-icon>
      View My Clubs
    </button>
  </div>

  <!-- No Search Results -->
  <div *ngIf="!loading && clubs.length > 0 && searchQuery && filteredClubs.length === 0" class="empty-state">
    <div class="empty-icon">
      <mat-icon>search_off</mat-icon>
    </div>
    <h2>No Clubs Found</h2>
    <p>Try adjusting your search terms</p>
  </div>

  <!-- Clubs Grid -->
  <div class="clubs-grid" *ngIf="!loading && filteredClubs.length > 0">
    <div *ngFor="let club of filteredClubs" class="club-card-wrapper">
      <div class="club-card" [style.border-top-color]="club.primaryColor">
        <!-- Card Header -->
        <div class="card-header" [style.background]="'linear-gradient(135deg, ' + club.primaryColor + '20 0%, ' + club.primaryColor + '05 100%)'">
          <div class="club-avatar" [style.background-color]="club.primaryColor">
            <mat-icon>sports_tennis</mat-icon>
          </div>
          <div class="club-title-section">
            <h3 class="club-name">{{ club.name }}</h3>
            <p class="club-location">
              <mat-icon class="location-icon">location_on</mat-icon>
              {{ club.address.city }}, {{ club.address.province }}
            </p>
          </div>
        </div>

        <!-- Card Details -->
        <div class="card-details">
          <div class="detail-grid">
            <!-- Members -->
            <div class="detail-item">
              <div class="detail-icon" [style.background-color]="club.primaryColor + '20'">
                <mat-icon [style.color]="club.primaryColor">people</mat-icon>
              </div>
              <div class="detail-content">
                <p class="detail-label">Members</p>
                <p class="detail-value">{{ club.memberCount }}</p>
              </div>
            </div>

            <!-- Membership Fee -->
            <div class="detail-item">
              <div class="detail-icon" [style.background-color]="club.primaryColor + '20'">
                <mat-icon [style.color]="club.primaryColor">card_membership</mat-icon>
              </div>
              <div class="detail-content">
                <p class="detail-label">Annual Fee</p>
                <p class="detail-value">{{ club.settings.membershipFee.currency }} {{ club.settings.membershipFee.annual }}</p>
              </div>
            </div>

            <!-- Operating Hours -->
            <div class="detail-item">
              <div class="detail-icon" [style.background-color]="club.primaryColor + '20'">
                <mat-icon [style.color]="club.primaryColor">schedule</mat-icon>
              </div>
              <div class="detail-content">
                <p class="detail-label">Hours</p>
                <p class="detail-value">{{ club.settings.operatingHours.start }}:00 - {{ club.settings.operatingHours.end }}:00</p>
              </div>
            </div>
          </div>

          <!-- Address Info -->
          <div class="address-info">
            <mat-icon>place</mat-icon>
            <span>{{ club.address.street }}</span>
          </div>
        </div>

        <!-- Action Button -->
        <div class="card-actions">
          <button
            mat-raised-button
            color="primary"
            class="request-btn"
            [disabled]="requesting && selectedClubId === club._id"
            (click)="requestMembership(club._id)">
            <mat-spinner *ngIf="requesting && selectedClubId === club._id" diameter="20"></mat-spinner>
            <mat-icon *ngIf="!(requesting && selectedClubId === club._id)">person_add</mat-icon>
            <span *ngIf="!(requesting && selectedClubId === club._id)">Request Membership</span>
            <span *ngIf="requesting && selectedClubId === club._id">Processing...</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
