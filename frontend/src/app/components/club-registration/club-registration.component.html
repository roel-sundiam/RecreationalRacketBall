<div class="registration-container">
  <div class="registration-content">
    <mat-card class="registration-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>add_business</mat-icon>
          Create New Club
        </mat-card-title>
        <mat-card-subtitle>
          Set up your tennis club in just a few steps
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <mat-stepper #stepper linear>
          <!-- Step 1: Club Information -->
          <mat-step [stepControl]="clubInfoForm" label="Club Information">
            <form [formGroup]="clubInfoForm">
              <div class="form-section">
                <h3>Basic Information</h3>

                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Club Name</mat-label>
                  <input matInput formControlName="name" placeholder="e.g., Rich Town Tennis Club">
                  <mat-icon matPrefix>business</mat-icon>
                  <mat-error *ngIf="clubInfoForm.get('name')?.hasError('required')">
                    Club name is required
                  </mat-error>
                  <mat-error *ngIf="clubInfoForm.get('name')?.hasError('minlength')">
                    Club name must be at least 3 characters
                  </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Club Slug (URL-friendly name)</mat-label>
                  <input matInput formControlName="slug" placeholder="rich-town-tennis-club">
                  <mat-icon matPrefix>link</mat-icon>
                  <mat-hint>Used in URLs. Auto-generated from club name.</mat-hint>
                  <mat-error *ngIf="clubInfoForm.get('slug')?.hasError('pattern')">
                    Only lowercase letters, numbers, and hyphens allowed
                  </mat-error>
                </mat-form-field>

                <h3>Contact Information</h3>

                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Contact Email</mat-label>
                  <input matInput type="email" formControlName="contactEmail" placeholder="contact@yourclub.com">
                  <mat-icon matPrefix>email</mat-icon>
                  <mat-error *ngIf="clubInfoForm.get('contactEmail')?.hasError('required')">
                    Email is required
                  </mat-error>
                  <mat-error *ngIf="clubInfoForm.get('contactEmail')?.hasError('email')">
                    Please enter a valid email
                  </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Contact Phone</mat-label>
                  <input matInput formControlName="contactPhone" placeholder="+63 917 123 4567">
                  <mat-icon matPrefix>phone</mat-icon>
                  <mat-error *ngIf="clubInfoForm.get('contactPhone')?.hasError('required')">
                    Phone number is required
                  </mat-error>
                  <mat-error *ngIf="clubInfoForm.get('contactPhone')?.hasError('pattern')">
                    Please enter a valid phone number
                  </mat-error>
                </mat-form-field>

                <h3>Branding (Optional)</h3>

                <div class="color-fields">
                  <mat-form-field appearance="outline">
                    <mat-label>Primary Color</mat-label>
                    <input matInput type="color" formControlName="primaryColor">
                    <mat-icon matPrefix>palette</mat-icon>
                  </mat-form-field>

                  <mat-form-field appearance="outline">
                    <mat-label>Accent Color</mat-label>
                    <input matInput type="color" formControlName="accentColor">
                    <mat-icon matPrefix>palette</mat-icon>
                  </mat-form-field>
                </div>
              </div>

              <div class="step-actions">
                <button mat-button (click)="cancel()">Cancel</button>
                <button mat-raised-button color="primary" matStepperNext>
                  Next
                  <mat-icon>arrow_forward</mat-icon>
                </button>
              </div>
            </form>
          </mat-step>

          <!-- Step 2: Address & Location -->
          <mat-step [stepControl]="addressForm" label="Address & Location">
            <form [formGroup]="addressForm">
              <div class="form-section">
                <h3>Club Address</h3>

                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Street Address</mat-label>
                  <input matInput formControlName="street" placeholder="123 Main Street">
                  <mat-icon matPrefix>home</mat-icon>
                  <mat-error *ngIf="addressForm.get('street')?.hasError('required')">
                    Street address is required
                  </mat-error>
                </mat-form-field>

                <div class="address-row">
                  <mat-form-field appearance="outline">
                    <mat-label>City</mat-label>
                    <input matInput formControlName="city" placeholder="San Fernando">
                    <mat-error *ngIf="addressForm.get('city')?.hasError('required')">
                      City is required
                    </mat-error>
                  </mat-form-field>

                  <mat-form-field appearance="outline">
                    <mat-label>Province/State</mat-label>
                    <input matInput formControlName="province" placeholder="Pampanga">
                    <mat-error *ngIf="addressForm.get('province')?.hasError('required')">
                      Province is required
                    </mat-error>
                  </mat-form-field>
                </div>

                <div class="address-row">
                  <mat-form-field appearance="outline">
                    <mat-label>Postal Code</mat-label>
                    <input matInput formControlName="postalCode" placeholder="2000">
                    <mat-error *ngIf="addressForm.get('postalCode')?.hasError('required')">
                      Postal code is required
                    </mat-error>
                  </mat-form-field>

                  <mat-form-field appearance="outline">
                    <mat-label>Country</mat-label>
                    <mat-select formControlName="country">
                      <mat-option *ngFor="let country of countries" [value]="country">
                        {{ country }}
                      </mat-option>
                    </mat-select>
                    <mat-error *ngIf="addressForm.get('country')?.hasError('required')">
                      Country is required
                    </mat-error>
                  </mat-form-field>
                </div>

                <h3>Geographic Coordinates</h3>
                <p class="hint-text">
                  Used for weather data and location services
                </p>

                <button
                  mat-stroked-button
                  type="button"
                  (click)="getCurrentLocation()"
                  class="location-button"
                  [disabled]="loading"
                >
                  <mat-icon>my_location</mat-icon>
                  Detect Current Location
                </button>

                <div class="coordinates-row">
                  <mat-form-field appearance="outline">
                    <mat-label>Latitude</mat-label>
                    <input matInput type="number" formControlName="latitude" placeholder="15.087" step="0.000001">
                    <mat-error *ngIf="addressForm.get('latitude')?.hasError('required')">
                      Latitude is required
                    </mat-error>
                    <mat-error *ngIf="addressForm.get('latitude')?.hasError('min') || addressForm.get('latitude')?.hasError('max')">
                      Latitude must be between -90 and 90
                    </mat-error>
                  </mat-form-field>

                  <mat-form-field appearance="outline">
                    <mat-label>Longitude</mat-label>
                    <input matInput type="number" formControlName="longitude" placeholder="120.6285" step="0.000001">
                    <mat-error *ngIf="addressForm.get('longitude')?.hasError('required')">
                      Longitude is required
                    </mat-error>
                    <mat-error *ngIf="addressForm.get('longitude')?.hasError('min') || addressForm.get('longitude')?.hasError('max')">
                      Longitude must be between -180 and 180
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>

              <div class="step-actions">
                <button mat-button matStepperPrevious>
                  <mat-icon>arrow_back</mat-icon>
                  Back
                </button>
                <button
                  mat-raised-button
                  color="primary"
                  (click)="registerClub()"
                  [disabled]="loading || clubInfoForm.invalid || addressForm.invalid"
                >
                  <mat-spinner diameter="20" *ngIf="loading"></mat-spinner>
                  <span *ngIf="!loading">Create Club</span>
                </button>
              </div>
            </form>
          </mat-step>
        </mat-stepper>
      </mat-card-content>
    </mat-card>
  </div>
</div>
